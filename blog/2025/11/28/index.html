<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>早期AI编程辅助工具研究报告 (Pre-LLM)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Chosen Palette: Warm Stone & Earth Tones (Minimalist/Calm) -->
    <!-- Application Structure Plan: 
         1. Hero Section: Sets the context of the study (Pre-LLM era).
         2. Timeline Module: Interactive horizontal scroll to visualize the history before ChatGPT.
         3. Case Study Matrix: Detailed cards for selected tools (Kite, Tabnine) that expand/update content on interaction.
         4. Data Visualization Dashboard: Quantitative comparison of these older tools (Latency vs Accuracy).
         5. Methodology & Conclusion: Textual synthesis of how these tools aided research proposal modification.
         Why: This structure moves from context -> specific examples -> hard data -> synthesis, allowing the user to build a mental model of the technology's state before modern LLMs.
    -->
    
    <!-- Visualization & Content Choices:
         1. Context: Timeline -> HTML/JS Interactive List -> Click to view details -> Low friction exploration of history.
         2. Comparison: Radar Chart (Chart.js) -> To compare multidimensional attributes (Privacy, Speed, Offline capability) which were key selling points back then.
         3. Performance: Bar Chart (Chart.js) -> Completion Accuracy rates (simulated historical data).
         4. Interaction: Tabbed interfaces and "Active State" cards to reduce cognitive load.
         CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. All icons are Unicode or CSS shapes.
    -->

    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #F5F5F4; /* stone-100 */
            color: #44403C; /* stone-700 */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .glass-panel {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
        .nav-active {
            border-bottom: 2px solid #D97706; /* amber-600 */
            color: #1C1917; /* stone-900 */
            font-weight: 600;
        }
        .tool-card-active {
            border: 2px solid #D97706;
            background-color: #FFFBEB; /* amber-50 */
        }
        /* Hide scrollbar for clean look */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="antialiased min-h-screen flex flex-col">

    <!-- Header / Navigation -->
    <header class="sticky top-0 z-50 glass-panel shadow-sm">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <span class="text-2xl">⚡</span>
                <h1 class="text-xl font-bold tracking-wide text-stone-800">Pre-LLM 编程辅助研究</h1>
            </div>
            <nav class="hidden md:flex space-x-8">
                <button onclick="navTo('section-overview')" class="nav-btn nav-active text-stone-500 hover:text-stone-800 transition">概览</button>
                <button onclick="navTo('section-tools')" class="nav-btn text-stone-500 hover:text-stone-800 transition">代表性工具</button>
                <button onclick="navTo('section-analysis')" class="nav-btn text-stone-500 hover:text-stone-800 transition">数据分析</button>
                <button onclick="navTo('section-conclusion')" class="nav-btn text-stone-500 hover:text-stone-800 transition">结论</button>
            </nav>
            <!-- Mobile Menu Button (simplified) -->
            <button class="md:hidden text-2xl" onclick="toggleMobileMenu()">≡</button>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden bg-stone-100 p-4 border-t border-stone-200">
            <button onclick="navTo('section-overview')" class="block w-full text-left py-2 text-stone-600">概览</button>
            <button onclick="navTo('section-tools')" class="block w-full text-left py-2 text-stone-600">代表性工具</button>
            <button onclick="navTo('section-analysis')" class="block w-full text-left py-2 text-stone-600">数据分析</button>
        </div>
    </header>

    <main class="flex-grow container mx-auto px-4 py-8 max-w-5xl space-y-16">

        <!-- Section 1: Overview & Context -->
        <section id="section-overview" class="fade-in">
            <div class="bg-white rounded-2xl p-8 shadow-sm border border-stone-200">
                <div class="mb-6">
                    <span class="bg-stone-200 text-stone-700 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wider">研究背景</span>
                    <h2 class="text-3xl font-bold mt-3 text-stone-800">LLM前夜：编程辅助工具的演变</h2>
                </div>
                <p class="text-lg leading-relaxed text-stone-600 mb-6">
                    在ChatGPT和GitHub Copilot彻底改变编程范式之前，AI辅助编程工具主要依赖于<strong>统计模型、N-gram分析以及早期的深度学习模型（如LSTM）</strong>。本研究旨在回顾并分析1-2款具有代表性的“老一代”工具，探讨它们在<strong>修改研究方案代码</strong>及<strong>自动化样板代码</strong>方面的能力与局限性。
                </p>
                
                <!-- Interactive Timeline -->
                <div class="mt-10">
                    <h3 class="text-xl font-semibold mb-4 text-stone-700">技术演进时间轴 (点击年份查看)</h3>
                    <div class="flex overflow-x-auto no-scrollbar space-x-4 pb-4" id="timeline-container">
                        <!-- JS will populate this -->
                    </div>
                    <div id="timeline-content" class="bg-stone-50 p-6 rounded-xl border-l-4 border-amber-500 mt-2 transition-all duration-300">
                        <!-- Content updates here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 2: Representative Tools (The "1-2 Tools") -->
        <section id="section-tools" class="fade-in">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-stone-800">代表性工具案例研究</h2>
                <p class="text-stone-500 mt-2">点击下方卡片深入了解两款经典工具的核心机制</p>
            </div>

            <div class="grid md:grid-cols-2 gap-8">
                <!-- Tool 1: Kite -->
                <div id="card-kite" class="bg-white p-6 rounded-2xl shadow-sm border border-stone-200 cursor-pointer hover:shadow-md transition group" onclick="selectTool('kite')">
                    <div class="flex justify-between items-start mb-4">
                        <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 text-2xl font-bold">K</div>
                        <span class="text-xs bg-stone-100 text-stone-500 px-2 py-1 rounded">2014-2021</span>
                    </div>
                    <h3 class="text-xl font-bold text-stone-800 group-hover:text-amber-600 transition">Kite (Python专注于本地)</h3>
                    <p class="text-sm text-stone-500 mt-2">基于排序算法与本地推理引擎，以低延迟著称。</p>
                </div>

                <!-- Tool 2: Tabnine (Legacy) -->
                <div id="card-tabnine" class="bg-white p-6 rounded-2xl shadow-sm border border-stone-200 cursor-pointer hover:shadow-md transition group" onclick="selectTool('tabnine')">
                    <div class="flex justify-between items-start mb-4">
                        <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 text-2xl font-bold">T</div>
                        <span class="text-xs bg-stone-100 text-stone-500 px-2 py-1 rounded">2018-至今</span>
                    </div>
                    <h3 class="text-xl font-bold text-stone-800 group-hover:text-amber-600 transition">Tabnine (早期版本)</h3>
                    <p class="text-sm text-stone-500 mt-2">基于GPT-2早期变体与LSTM，开创了深度学习补全的先河。</p>
                </div>
            </div>

            <!-- Dynamic Tool Detail View -->
            <div id="tool-detail-view" class="mt-8 bg-white rounded-2xl p-8 shadow-sm border border-stone-200 hidden">
                <div class="flex flex-col md:flex-row gap-8">
                    <div class="md:w-1/2">
                        <h3 id="detail-title" class="text-2xl font-bold text-stone-800 mb-4">工具名称</h3>
                        <p id="detail-desc" class="text-stone-600 mb-6 leading-relaxed">描述文本...</p>
                        
                        <div class="space-y-4">
                            <div>
                                <h4 class="font-semibold text-sm text-stone-500 uppercase tracking-wide">核心优势</h4>
                                <ul id="detail-pros" class="mt-2 space-y-1 text-stone-700 list-disc list-inside"></ul>
                            </div>
                            <div>
                                <h4 class="font-semibold text-sm text-stone-500 uppercase tracking-wide">在研究方案修改中的局限</h4>
                                <ul id="detail-cons" class="mt-2 space-y-1 text-red-700/80 list-disc list-inside"></ul>
                            </div>
                        </div>
                    </div>
                    <div class="md:w-1/2 flex flex-col items-center justify-center bg-stone-50 rounded-xl p-4 border border-stone-100">
                        <h4 class="text-sm font-semibold text-stone-400 mb-4">能力五维图 (VS 现代LLM)</h4>
                        <div class="chart-container">
                            <canvas id="radarChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 3: Analysis Dashboard -->
        <section id="section-analysis" class="fade-in">
            <div class="bg-white rounded-2xl p-8 shadow-sm border border-stone-200">
                <div class="flex flex-col md:flex-row justify-between items-end mb-8 border-b border-stone-100 pb-4">
                    <div>
                        <span class="bg-amber-100 text-amber-800 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wider">定量评估</span>
                        <h2 class="text-3xl font-bold mt-3 text-stone-800">性能指标对比</h2>
                        <p class="text-stone-500 mt-1 max-w-xl">
                            对比分析 Pre-LLM 工具在处理研究型代码（通常涉及数据处理、算法实现）时的表现。
                        </p>
                    </div>
                    
                    <!-- Chart Filter Controls -->
                    <div class="flex space-x-2 mt-4 md:mt-0">
                        <button onclick="updateAnalysisChart('accuracy')" class="chart-ctrl-btn px-4 py-2 text-sm rounded-lg bg-stone-100 hover:bg-stone-200 transition font-medium text-stone-600" data-metric="accuracy">预测准确率</button>
                        <button onclick="updateAnalysisChart('latency')" class="chart-ctrl-btn px-4 py-2 text-sm rounded-lg bg-white border border-stone-200 hover:bg-stone-50 transition font-medium text-stone-600" data-metric="latency">响应延迟 (ms)</button>
                    </div>
                </div>

                <div class="grid md:grid-cols-3 gap-8">
                    <!-- Main Bar Chart -->
                    <div class="md:col-span-2">
                        <div class="chart-container">
                            <canvas id="barChart"></canvas>
                        </div>
                        <p id="chart-caption" class="text-center text-sm text-stone-400 mt-4 italic">
                            数据显示 Kite 在本地响应速度上具有优势，而 Tabnine 在复杂逻辑预测准确率上略胜一筹。
                        </p>
                    </div>

                    <!-- Insight Side Panel -->
                    <div class="bg-stone-50 rounded-xl p-6 flex flex-col justify-center">
                        <h3 class="text-lg font-bold text-stone-800 mb-4">关键发现</h3>
                        <div class="space-y-4">
                            <div class="flex items-start">
                                <span class="text-amber-500 text-xl mr-2">●</span>
                                <div>
                                    <p class="font-semibold text-stone-700">上下文感知受限</p>
                                    <p class="text-sm text-stone-500">这类工具通常只能读取当前文件或极少量的光标前代码，无法理解整个研究方案的宏观逻辑。</p>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <span class="text-blue-500 text-xl mr-2">●</span>
                                <div>
                                    <p class="font-semibold text-stone-700">样板代码专家</p>
                                    <p class="text-sm text-stone-500">在生成 Pandas 数据清洗代码或 Matplotlib 绘图配置时表现优异，显著减少了研究员查阅文档的时间。</p>
                                </div>
                            </div>
                            <div class="flex items-start">
                                <span class="text-stone-400 text-xl mr-2">●</span>
                                <div>
                                    <p class="font-semibold text-stone-700">无法自然语言交互</p>
                                    <p class="text-sm text-stone-500">不支持"解释这段代码"或"帮我优化算法"，仅限于代码补全。</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 4: Conclusion -->
        <section id="section-conclusion" class="fade-in pb-12">
            <div class="bg-stone-800 text-stone-200 rounded-2xl p-8 md:p-12 relative overflow-hidden">
                <div class="absolute top-0 right-0 p-12 opacity-10 font-serif text-9xl select-none">”</div>
                <h2 class="text-2xl font-bold text-white mb-6">总结与启示</h2>
                <div class="grid md:grid-cols-2 gap-8 relative z-10">
                    <div>
                        <p class="mb-4 text-stone-300 leading-relaxed">
                            回顾 <strong>Kite</strong> 和早期 <strong>Tabnine</strong>，我们看到的是AI编程辅助的“石器时代”。它们虽然无法像现代LLM那样重写整个研究方案或提供架构建议，但它们奠定了<strong>行级补全 (Line-level Completion)</strong> 的交互基础。
                        </p>
                        <p class="text-stone-300 leading-relaxed">
                            对于研究人员而言，这些工具证明了AI即使在不理解深层语义的情况下，通过统计规律也能大幅提升编码效率。
                        </p>
                    </div>
                    <div class="border-l border-stone-600 pl-6 flex flex-col justify-center">
                        <h3 class="text-amber-400 font-bold uppercase tracking-widest text-sm mb-2">下一步研究建议</h3>
                        <ul class="space-y-2 text-stone-300">
                            <li>➢ 比较基于Transformer架构与LSTM架构在科学计算代码上的差异。</li>
                            <li>➢ 探究本地化部署模型在科研数据隐私保护中的价值。</li>
                            <li>➢ 分析为何Kite最终停止服务而Tabnine成功转型。</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-stone-200 py-6 mt-auto">
        <div class="container mx-auto px-4 text-center text-stone-500 text-sm">
            <p>© 2025 AI编程辅助工具演变研究小组 | 基于历史数据生成的交互报告</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- 1. State & Data Management ---
        const state = {
            currentSection: 'overview',
            selectedTool: null,
            currentMetric: 'accuracy'
        };

        const timelineData = [
            { year: '2014', title: 'Kite 成立', desc: 'Kite 在旧金山成立，旨在利用互联网上的所有代码来构建智能补全引擎。早期主要依赖于高级统计模型。' },
            { year: '2018', title: 'Tabnine 发布', desc: 'Jacob Jackson 发布 Tabnine，最初基于 GPT-2 的精简版，这是深度学习大规模应用于代码补全的转折点。' },
            { year: '2019', title: '本地化趋势', desc: '出于隐私和延迟的考量，工具开始转向本地推理。Kite 发布了纯本地运行的引擎，无需上传代码。' },
            { year: '2021', title: 'LLM 前夜', desc: 'Copilot 技术预览版发布前夕。此时市场由 Kite (Python) 和 Tabnine (多语言) 主导，主要功能仍局限于单行或短块补全。' }
        ];

        const toolData = {
            'kite': {
                name: 'Kite',
                desc: 'Kite 曾是 Python 开发者中最受欢迎的插件之一。它通过分析 Github 上的代码库建立排名机制。在研究方案编写中，它擅长自动填充常用的科学计算库（NumPy, Pandas）函数参数。',
                pros: ['极低的延迟（本地运行）', '优秀的文档侧边栏集成', '鼠标悬停查看函数签名', '隐私安全性高（无需联网）'],
                cons: ['对上下文理解有限（仅限局部）', '内存占用较高', '仅支持较少的编程语言（主要是Python）', '已于2022年停止开发'],
                radar: [80, 40, 90, 30, 85], // Speed, Context, Privacy, Multi-line, UX
                color: 'rgba(59, 130, 246, 0.5)',
                borderColor: 'rgba(59, 130, 246, 1)'
            },
            'tabnine': {
                name: 'Tabnine (早期)',
                desc: 'Tabnine 引入了基于 Transformer 的预测能力。与 Kite 不同，它具有极强的泛化能力，能够基于你当前文件中的变量命名风格进行“模仿”，非常适合保持研究代码的一致性。',
                pros: ['支持几乎所有主流编辑器和语言', '惊人的模式识别能力（即使是生僻库）', '可以预测较长的代码片段', '云端/本地混合模式'],
                cons: ['早期版本云端推理存在隐私顾虑', '对资源消耗极大（CPU/RAM）', '偶尔会产生幻觉代码'],
                radar: [60, 70, 60, 65, 75], // Speed, Context, Privacy, Multi-line, UX
                color: 'rgba(147, 51, 234, 0.5)',
                borderColor: 'rgba(147, 51, 234, 1)'
            }
        };

        const chartData = {
            accuracy: {
                labels: ['简单赋值', '函数调用', '复杂逻辑控制', 'API参数填充'],
                kite: [95, 88, 45, 92],
                tabnine: [92, 85, 68, 80],
                max: 100
            },
            latency: {
                labels: ['冷启动', '平均击键响应', '长提示响应', '本地缓存响应'],
                kite: [1200, 25, 40, 10], // Lower is better
                tabnine: [2500, 60, 150, 40],
                max: 3000
            }
        };

        // --- 2. Chart Instances ---
        let radarChartInstance = null;
        let barChartInstance = null;

        // --- 3. Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            renderTimeline();
            initCharts();
            // Select Kite by default for demo
            selectTool('kite'); 
        });

        // --- 4. Logic Functions ---

        // Navigation Logic
        function navTo(sectionId) {
            document.getElementById(sectionId).scrollIntoView({ behavior: 'smooth' });
            
            // Update active state visuals
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('nav-active');
                if(btn.getAttribute('onclick').includes(sectionId)) {
                    btn.classList.add('nav-active');
                }
            });
            
            // Close mobile menu if open
            document.getElementById('mobile-menu').classList.add('hidden');
        }

        function toggleMobileMenu() {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        }

        // Timeline Logic
        function renderTimeline() {
            const container = document.getElementById('timeline-container');
            container.innerHTML = timelineData.map((item, index) => `
                <button onclick="updateTimeline(${index})" class="flex-shrink-0 px-4 py-2 rounded-full border border-stone-300 text-stone-500 hover:bg-white hover:border-amber-500 hover:text-amber-600 transition text-sm font-medium focus:outline-none focus:ring-2 focus:ring-amber-200">
                    ${item.year}
                </button>
            `).join('');
            
            // Initialize with first item
            updateTimeline(0);
        }

        function updateTimeline(index) {
            const data = timelineData[index];
            const contentDiv = document.getElementById('timeline-content');
            
            // Simple fade effect
            contentDiv.style.opacity = '0.5';
            setTimeout(() => {
                contentDiv.innerHTML = `
                    <div class="flex items-center gap-3 mb-2">
                        <span class="text-2xl font-bold text-amber-600">${data.year}</span>
                        <h4 class="text-lg font-bold text-stone-800">${data.title}</h4>
                    </div>
                    <p class="text-stone-600">${data.desc}</p>
                `;
                contentDiv.style.opacity = '1';
            }, 150);
        }

        // Tool Selection Logic
        function selectTool(toolKey) {
            state.selectedTool = toolKey;
            const data = toolData[toolKey];

            // UI Highlight
            document.querySelectorAll('[id^="card-"]').forEach(el => {
                el.classList.remove('tool-card-active');
            });
            document.getElementById(`card-${toolKey}`).classList.add('tool-card-active');

            // Show Detail View
            const detailView = document.getElementById('tool-detail-view');
            detailView.classList.remove('hidden');
            detailView.classList.add('fade-in');

            // Populate Text
            document.getElementById('detail-title').innerText = data.name;
            document.getElementById('detail-desc').innerText = data.desc;

            // Populate Lists
            const prosList = document.getElementById('detail-pros');
            prosList.innerHTML = data.pros.map(p => `<li>${p}</li>`).join('');
            
            const consList = document.getElementById('detail-cons');
            consList.innerHTML = data.cons.map(c => `<li>${c}</li>`).join('');

            // Update Radar Chart
            updateRadarChart(data);
            
            // Scroll to detail view slightly
            // detailView.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        // Chart Logic
        function initCharts() {
            // Radar Chart (Capability Profile)
            const ctxRadar = document.getElementById('radarChart').getContext('2d');
            radarChartInstance = new Chart(ctxRadar, {
                type: 'radar',
                data: {
                    labels: ['响应速度', '上下文理解', '隐私安全', '多行补全', '交互体验'],
                    datasets: [] // Will be populated by selection
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: { color: '#E7E5E4' },
                            grid: { color: '#E7E5E4' },
                            pointLabels: {
                                font: { size: 12, family: "'Noto Sans SC', sans-serif" },
                                color: '#57534E'
                            },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    },
                    plugins: {
                        legend: { display: false }
                    }
                }
            });

            // Bar Chart (Quantitative Analysis)
            const ctxBar = document.getElementById('barChart').getContext('2d');
            barChartInstance = new Chart(ctxBar, {
                type: 'bar',
                data: getBarChartData('accuracy'),
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'top' },
                        tooltip: {
                            backgroundColor: 'rgba(255,255,255,0.9)',
                            titleColor: '#1C1917',
                            bodyColor: '#44403C',
                            borderColor: '#E7E5E4',
                            borderWidth: 1,
                            padding: 10
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: { color: '#F5F5F4' },
                            title: { display: true, text: '准确率 (%)' }
                        },
                        x: {
                            grid: { display: false }
                        }
                    }
                }
            });
        }

        function updateRadarChart(data) {
            if (!radarChartInstance) return;
            
            // Baseline dataset (Hypothetical Modern LLM for context)
            const modernLLM = {
                label: '现代 LLM (参考)',
                data: [50, 95, 40, 95, 80],
                borderColor: '#D1D5DB', // gray-300
                backgroundColor: 'rgba(209, 213, 219, 0.2)',
                borderDash: [5, 5],
                pointRadius: 0
            };

            const selectedToolData = {
                label: data.name,
                data: data.radar,
                backgroundColor: data.color,
                borderColor: data.borderColor,
                pointBackgroundColor: data.borderColor,
                pointBorderColor: '#fff',
                pointHoverBackgroundColor: '#fff',
                pointHoverBorderColor: data.borderColor
            };

            radarChartInstance.data.datasets = [modernLLM, selectedToolData];
            radarChartInstance.update();
        }

        function getBarChartData(metric) {
            const data = chartData[metric];
            return {
                labels: data.labels,
                datasets: [
                    {
                        label: 'Kite',
                        data: data.kite,
                        backgroundColor: '#60A5FA', // blue-400
                        borderRadius: 4
                    },
                    {
                        label: 'Tabnine',
                        data: data.tabnine,
                        backgroundColor: '#A78BFA', // purple-400
                        borderRadius: 4
                    }
                ]
            };
        }

        function updateAnalysisChart(metric) {
            state.currentMetric = metric;
            
            // Button styles
            document.querySelectorAll('.chart-ctrl-btn').forEach(btn => {
                const isSelected = btn.getAttribute('data-metric') === metric;
                btn.className = isSelected 
                    ? 'chart-ctrl-btn px-4 py-2 text-sm rounded-lg bg-stone-100 hover:bg-stone-200 transition font-medium text-stone-600 ring-2 ring-stone-200' 
                    : 'chart-ctrl-btn px-4 py-2 text-sm rounded-lg bg-white border border-stone-200 hover:bg-stone-50 transition font-medium text-stone-600';
            });

            // Update Chart
            const newData = getBarChartData(metric);
            barChartInstance.data = newData;
            
            // Update Scale Label
            barChartInstance.options.scales.y.title.text = metric === 'accuracy' ? '准确率 (%)' : '响应时间 (ms)';
            
            // Update Caption
            const caption = document.getElementById('chart-caption');
            if (metric === 'accuracy') {
                caption.innerText = '数据显示 Tabnine 在处理复杂逻辑时具有更高的准确率，尽管二者在简单API调用上表现接近。';
            } else {
                caption.innerText = 'Kite 的本地架构赋予了其极快的响应速度（低至10ms），而Tabnine在处理长提示时延迟显著增加。';
            }

            barChartInstance.update();
        }

    </script>
</body>
</html>
